<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Node.js AI Lab: Hub</title>
    <style>
        body { font-family: sans-serif; background: #121212; color: #e0e0e0; max-width: 800px; margin: auto; padding: 40px 20px; }
        .myCard { background: #1e1e1e; padding: 25px; border-radius: 12px; border: 1px solid #333; margin-top: 20px; }
        .myNav { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 30px; }
        .myNavLink { 
            background: #252526; color: #4ec9b0; padding: 20px; border-radius: 8px; 
            text-decoration: none; border: 1px solid #333; text-align: center; transition: 0.3s;
        }
        .myNavLink:hover { background: #0d6efd; color: white; transform: translateY(-3px); }
        .myTerminal { background: #000; color: #d4d4d4; padding: 15px; border-radius: 6px; font-family: monospace; margin-top: 15px; min-height: 50px; }
        .myBtn { background: #0d6efd; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; }
        .myBtn:disabled { background: #444; }
    </style>
</head>
<body>

    <h1 style="color: #0d6efd;">ğŸš€ Node.js Browser Hub</h1>
    <h3><a href="https://github.com/hpssjellis/node-container">Github at hpssjellis/node-container</a></h3>
    <p id="myStatus">Checking environment...</p>

    <div class="myCard">
        <h3>Starter: Hello World</h3>
        <p>Verify the virtual engine is online before entering the labs.</p>
        <button class="myBtn" id="myRunBtn" onclick="myRunHello()" disabled>Run Hello World</button>
        <div class="myTerminal" id="myTerm">Ready...</div>
    </div>

    <div class="myNav">
        <a href="other.html" class="myNavLink">ğŸ§ª Advanced Lab<br><small>Servers & Shell Commands</small></a>
        <a href="data.html" class="myNavLink">ğŸ“Š Data Science<br><small>Math & Buffer Analysis</small></a>
        <a href="chat.html" class="myNavLink">ğŸ’¬ Network Lab<br><small>Chat & URL Parsing</small></a>
        <a href="files.html" class="myNavLink">ğŸ“‚ File Manager<br><small>Archiving & Persistence</small></a>
        <a href="other2.html" class="myNavLink">ğŸ“‚ File Manager<br><small>other2</small></a>
        <a href="other3.html" class="myNavLink">ğŸ“‚ File Manager<br><small>other3</small></a>
    </div>

    <script type="module">
        import { WebContainer } from 'https://unpkg.com/@webcontainer/api@1.1.8/dist/index.js';
        let myWebContainer;

        window.myRunHello = async () => {
            const myTerm = document.getElementById('myTerm');
            myTerm.innerText = "> Running...";
            await myWebContainer.fs.writeFile('/hello.js', "console.log('Hello from the Node Engine!')");
            const myProcess = await myWebContainer.spawn('node', ['hello.js']);
            myProcess.output.pipeTo(new WritableStream({
                write(myData) { myTerm.innerText = myData; }
            }));
        };

        async function myInit() {
            if (!window.crossOriginIsolated) {
                document.getElementById('myStatus').innerHTML = "âŒ <b style='color:red'>Security Headers Missing!</b> Node cannot boot.";
                return;
            }
            myWebContainer = await WebContainer.boot();
            document.getElementById('myStatus').innerText = "âœ… Engine Online";
            document.getElementById('myRunBtn').disabled = false;
        }
        myInit();
    </script>
</body>
</html>
