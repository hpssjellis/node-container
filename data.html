<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Node Lab: Data & Buffers</title>
    <style>
        body { font-family: sans-serif; background: #121212; color: #e0e0e0; max-width: 800px; margin: auto; padding: 20px; }
        .myNav { text-align: center; margin-bottom: 20px; border-bottom: 1px solid #333; padding-bottom: 10px; }
        .myNav a { color: #888; text-decoration: none; margin: 0 10px; }
        .myCard { background: #1e1e1e; padding: 20px; border-radius: 10px; border: 1px solid #333; }
        .myTerminal { background: #000; color: #4ec9b0; padding: 10px; min-height: 100px; overflow-y: auto; font-family: monospace; margin-top: 10px; border-radius: 5px; }
        .myBtn { background: #0d6efd; color: white; border: none; padding: 10px; width: 100%; border-radius: 5px; cursor: pointer; }
        .myBtn:disabled { background: #444; }
    </style>
</head>
<body>
    <nav class="myNav">
        <a href="index.html">Hub</a> | <a href="servers.html">Servers</a> | <a href="data.html" style="color:#0d6efd">Data</a> | <a href="chat.html">Network</a> | <a href="files.html">Files</a>
    </nav>

    <h2>ðŸ“Š Data Science & Buffers</h2>
    <div class="myCard">
        <p>Convert text into binary formats (Hex and Base64).</p>
        <button class="myBtn" id="myRunBtn" onclick="myRunBuffer()" disabled>Run Buffer Conversion</button>
        <div class="myTerminal" id="termData">Waiting for engine...</div>
    </div>

    <script type="module">
        import { WebContainer } from 'https://unpkg.com/@webcontainer/api@1.1.8/dist/index.js';
        let myWebContainer;

        window.myRunBuffer = async () => {
            const myTerminal = document.getElementById('termData');
            myTerminal.innerText = "> Running...";
            const myCode = `
                const myBuf = Buffer.from('NodeJS in Browser');
                console.log('Original String: NodeJS in Browser');
                console.log('Hexadecimal: ' + myBuf.toString('hex'));
                console.log('Base64: ' + myBuf.toString('base64'));
                console.log('Byte Length: ' + myBuf.length);
            `;
            await myWebContainer.fs.writeFile('/data.js', myCode);
            const myProcess = await myWebContainer.spawn('node', ['data.js']);
            myProcess.output.pipeTo(new WritableStream({ write(d) { myTerminal.innerText = d; }}));
        };

        async function myInit() {
            if (!window.crossOriginIsolated) return;
            myWebContainer = await WebContainer.boot();
            document.getElementById('myRunBtn').disabled = false;
            document.getElementById('termData').innerText = "Ready.";
        }
        myInit();
    </script>
</body>
</html>
